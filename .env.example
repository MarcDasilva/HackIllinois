# ============================================================
# LAVA Entropy Oracle + VeilDoc Encryption Backend
# Environment Configuration
# ============================================================

# ── Solana Configuration ────────────────────────────────────
SOLANA_RPC_URL=https://api.devnet.solana.com
SOLANA_KEYPAIR_PATH=~/.config/solana/id.json

# ── Oracle Configuration ────────────────────────────────────
ENTROPY_INTERVAL_MS=5000
TOKEN_ACCOUNTS=
DRY_RUN=false

# ── Supabase Configuration ──────────────────────────────────
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_TABLE=documents
SUPABASE_ID_COLUMN=id
SUPABASE_LIMIT=1000

# ── Google Drive Integration ────────────────────────────────
# Path to Google service account JSON key file (optional if using OAuth only)
GOOGLE_SERVICE_ACCOUNT_PATH=./config/google-service-account.json

# Public HTTPS URL where webhook notifications will be received
# Must be publicly accessible and verified with Google
GOOGLE_DRIVE_WEBHOOK_URL=https://your-domain.com/api/drive/webhook

# Optional: Restrict file listing to a specific folder
GOOGLE_DRIVE_FOLDER_ID=

# Required for service-account uploads: folder in a Shared Drive (service accounts have no storage quota).
# Not needed when using OAuth: pass userId in /api/drive/encrypt and ensure user has connected Drive.
GOOGLE_DRIVE_UPLOAD_FOLDER_ID=

# OAuth 2.0 (recommended to avoid storage quota issues)
# When set, pass userId in POST /api/drive/encrypt and GET /api/drive/files?userId=... to use the user's Drive.
# User must have completed OAuth (e.g. connect Drive) so tokens exist in user_integrations.
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/oauth/callback
# Supabase user UUID to use for "Sign in with Google" (from Supabase Dashboard → Authentication → Users).
# Frontend reads this via GET /api/oauth/user-id so you only configure it here.
OAUTH_DEFAULT_USER_ID=

# ── VeilDoc Configuration ───────────────────────────────────
# Default encryption mode: 'pattern' (sensitive data only) or 'full' (entire document)
VEILDOC_DEFAULT_MODE=pattern

# Whether to replace original files in Drive or create new versions
VEILDOC_REPLACE_ORIGINAL=false

# Temporary directory for file processing (must be writable)
VEILDOC_TEMP_DIR=/tmp/veildoc

# Python executable path (use 'python3' or full path)
PYTHON_EXECUTABLE=python3

# ── API Server Configuration ────────────────────────────────
# Port for the REST API server
API_PORT=3000

# Host to bind the server (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
API_HOST=0.0.0.0

# CORS: allow this origin (e.g. frontend). If frontend is on another port, set e.g. http://localhost:3001
CORS_ORIGIN=http://localhost:3000

# Webhook renewal interval in milliseconds (default: 12 hours)
WEBHOOK_RENEWAL_INTERVAL_MS=43200000
